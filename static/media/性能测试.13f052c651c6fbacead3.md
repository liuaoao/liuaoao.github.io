# 性能测试

# 性能测试

write with AI：

性能测试是一种软件测试类型，目的是评估系统在特定负载和压力下的行为和反应能力。该测试可以检查系统在正常、峰值和超出峰值负载下的性能、稳定性、可靠性和可伸缩性。性能测试可以帮助开发人员和测试人员确定系统的性能瓶颈，以及确定必要的硬件和软件资源，以便系统可以在高负载下正常运行。

性能测试通常分为负载测试、压力测试、稳定性测试、容量测试和基准测试等不同类型。负载测试是模拟实际使用情况下的负载，并测试系统在该负载下的性能。压力测试是在极限负载下测试系统的性能和稳定性。稳定性测试是测试系统在长时间高负载下的性能稳定性。容量测试是确定系统在可接受性能水平下所能处理的最大负载。基准测试则是测试系统在特定硬件和软件环境下的性能和稳定性，以便将来的测试可以与之进行比较。

性能测试通常使用自动化测试工具进行测试，例如Apache JMeter、LoadRunner和Gatling等。这些工具可以模拟多种负载和压力情况，并提供详细的性能指标和测试报告。测试人员可以使用这些指标和报告来优化系统的性能，并提高系统的可靠性和可伸缩性。

总之，性能测试是一种非常重要的测试类型，可以帮助开发人员和测试人员确定系统的性能瓶颈，以及必要的硬件和软件资源，以便系统可以在高负载下正常运行。

## **压力/负载/性能测试之异同**

在产品研发过程中，常常会混淆压力/负载/性能测试这三者之间的区别，这三种测试到底有什么不同呢？

- **压力测试（Stress Testing）**，也称为强度测试，通过模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。压力测试需要确定一个系统的瓶颈或者不能接收的性能点，来获得系统能提供的最大的服务级别。通俗地讲，压力测试是为了发现在什么条件下您的应用程序的性能会变得不可接受。
- **负载测试（Load Testing）**通常被定义为给被测系统加上它所能操作的最大任务数的过程，负载测试有时也会被称为“容量测试”或者“耐久性测试/持久性测试”，其目标是确定并确保系统在超出最大预期工作量的情况下仍能正常运行。对于WEB应用来讲，负载则是并发用户或者HTTP连接的数量。负载测试通过测试系统在资源超负荷情况下的表现，以发现设计上的错误或验证系统的负载能力。在这种测试中，将使测试对象承担不同的工作量，以评测和评估测试对象在不同工作量条件下的性能行为，以及持续正常运行的能力。
- **性能测试（Performance Testing）**的目的不是去找系统Bugs，而是排除系统的性能瓶颈，并为回归测试建立一个基准。而性能测试的操作，实际上就是一个非常小心受控的测量分析过程：“运行负载试验->测度性能->调试系统”。在理想的情况下，被测应用在这个时候已经是足够稳定，所以这个过程得以顺利进行。性能测试还有另一个目标就是建立一组被测系统的基准数据。应用在网络上的性能测试重点是利用成熟先进的自动化技术进行网络应用性能监控、网络应用性能分析和网络预测。
- **基准测试（benchmarking）**是一种测量和评估软件性能指标的活动。 你可以在某个时候通过基准测试建立一个已知的性能水平（称为基准线），当系统的软硬件环境发生变化之后再进行一次基准测试以确定那些变化对性能的影响。 这是基准测试最常见的用途。

# 工具篇

压力测试的主流工具包括Apache JMeter、LoadRunner、Locust：

LoadRunner是一款C/S架构的商业版性能测试工具，在国内存在的时间较早，在国内在使用较广泛，知名度较高。该工具免费开放了50个虚拟用户，可供学习和使用。在国内的网站上有破解版本，但是到了最新的12版本，不再有破解版。破解版的仿真度较差，HTTP的瀑布图是按两个两个并发（与浏览器行为不一样），最新版本的仿真相对提高很多，对于HTTP静态请求相似度请求提高到80%，而动态请求就要差很多。由于loadRunner起步早，支持的协议很多，很多不常用的协议都支持，如电子邮件相关协议都支持。但对一些视频协议支持的不太好。loadrunner目前对浏览器最新版支持的不太好，最新的loadrunner12只支持ie11，对其它浏览器如谷歌、火狐等支持的较差。在脚本录制方面有些网站录制不了。价格上比较昂贵，一般小企业无力承担。

JMeter是一款开源免费的压测产品，最初被设计用于Web应用功能测试使用，如今JMeter被国内企业用于性能测试。对于WEB服务器（支持浏览器访问），不建议使用Jmeter,因为jmeter的线程组都是线性执行的，与浏览器相差很大，测试结果不具有参考性。对于纯接口的部分场景（对接口调用顺序无严格要求）测试可以使用，但是要注意使用技巧，才能达到理想结果。

Locust 完全基本 Python 编程语言，采用 Pure Python 描述测试脚本，并且 HTTP 请求完全基于 Requests 库。除了 HTTP/HTTPS 协议，Locust 也可以测试其它协议的系统，只需要采用Python调用对应的库进行请求描述即可。但是需要手工编写脚本，有一定的难度

[cosbench和radosbench](%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%208820ef89589647a5b0290e932af01ec1/cosbench%E5%92%8Cradosbench%20faa38f98fe9b4571a66151516cfc1e59.md)

[locust](%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%208820ef89589647a5b0290e932af01ec1/locust%20b394048473ad4740bc8428c2c2484b24.md)